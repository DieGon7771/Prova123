<!DOCTYPE html>
<html>
<head>
    <title>Streaming - Prototipo</title>
    <style>
        body { background: #0f0f0f; color: white; font-family: Arial; }
        .movie-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; }
        .movie-card { cursor: pointer; }
        .movie-poster { width: 100%; border-radius: 8px; }
    </style>
</head>
<body>
    <h1>ðŸŽ¬ Guarda Film</h1>
    
    <div id="movies" class="movie-grid">
        <!-- Film caricati via JS -->
    </div>
    
    <video id="player" controls style="display: none; width: 100%; margin-top: 30px;"></video>
    
    <script>
        const TMDB_API_KEY = 'TMDB_API_KEY_PLACEHOLDER';
        const VIDEO_API = 'https://vixsrc.to/movie/';
        const CATALOG_API = 'https://vixsrc.to/api/list/';
        
        // Carica film
        async function loadMovies() {
            // Usa la TUA API catalogo
            const response = await fetch(`${CATALOG_API}movie?lang=it`);
            const movies = await response.json();
            
            // Mostra i film
            movies.forEach(movie => {
                const card = document.createElement('div');
                card.className = 'movie-card';
                card.innerHTML = `
                    <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" class="movie-poster">
                    <h3>${movie.title}</h3>
                `;
                card.onclick = () => playMovie(movie.id);
                document.getElementById('movies').appendChild(card);
            });
        }
        
        async function playMovie(id) {
            // 1. Prendi URL video dalla TUA API
            const videoResponse = await fetch(`${VIDEO_API}${id}`);
            const videoData = await videoResponse.json();
            
            // 2. Riproduci
            const player = document.getElementById('player');
            player.src = videoData.video_url || videoData.sources[0].src;
            player.style.display = 'block';
            player.play();
        }
        
        loadMovies();
    </script>
</body>
</html>
